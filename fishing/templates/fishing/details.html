{% extends 'fishing/base.html' %}
{% block content %}


{% if bottom_map != None %}
<!-- Маркерная карта -->
<p><strong>Маркерная карта:</strong> {{ bottom_map }}</p>
<p><strong>N° (-90 до 90):</strong> {{ bottom_map.bottom_map_northern_degree }}</p>
<p><strong>N' (0 до 59):</strong> {{ bottom_map.bottom_map_northern_minute }}</p>
<p><strong>N" (0 до 59.999):</strong> {{ bottom_map.bottom_map_northern_second}}</p>
<p><strong>E° (-90 до 90):</strong> {{ bottom_map.bottom_map_easter_degree }}</p>
<p><strong>E' (0 до 59):</strong> {{ bottom_map.bottom_map_easter_minute }}</p>
<p><strong>E" (0 до 59.999):</strong> {{ bottom_map.bottom_map_easter_second }}</p>
<p>
    {% if bottom_map.owner == user %}
    <a href="{% url 'fishing:bottom_map_renewal' district_id water_id place_id bottom_map.id %}" class="btn">Редактировать</a>
    {% endif %}
    <a href="{% url 'fishing:point' district_id water_id place_id bottom_map.id %}" class="btn">Точки маркерной карты</a>
    <a onclick="back()" class="btn">Назад</a>
</p>
{% endif %}



{% if point != None %}
<!-- Точка маркерной карты -->
<p><strong>Точка марнкерной карты:</strong> {{ point }}</p>
<p><strong>Азимут:</strong> {{ point.point_azimuth }}</p>
<p><strong>Дистанция:</strong> {{ point.point_distance }}</p>
<p><strong>Глубина:</strong> {{ point.point_depth }}</p>
<p><strong>Грунт:</strong> {{ point.priming }}</p>
<p>
    <a onclick="back()" class="btn">Назад</a>
</p>
{% endif %}



{% if fish != None %}
<!-- Рыба -->
<p><strong>Рыба:</strong> {{ fish.name_of_fish }}</p>
<p><strong>Описание:</strong> {{ fish.fish_description }}</p>
<p>
    {% if user.is_staff %}
    <a href="{% url 'fishing:fish_renewal' fish.id %}" class="btn">Редактировать</a>
    {% endif %}
    <a onclick="back()" class="btn">Назад</a>
</p>
{% endif %}


{% if fishing != None %}
<!-- Рыбалка -->
<p><strong>Дата проведения рыбалки:</strong> {{ fishing.date }} 
{% if fishing.planned %}
(запланировано)
{% endif %}
</p>
<p><strong>Время начала рыбалки:</strong> {{ fishing.time }}</p>
<p><strong>Место проведения рыбалки:</strong></p>

{% if fishing.placefishing_set.get %}
<p><strong>Район: </strong>{{ fishing.placefishing_set.get.place.water.district }}</p>
<p><strong>Водоём: </strong>{{ fishing.placefishing_set.get.place.water }}</p>
<p><strong>Ближайший населенный пункт: </strong>{{ fishing.placefishing_set.get.place.place_locality }}</p>
<p><strong>Название места: </strong>{{ fishing.placefishing_set.get.place.place_name }}</p>
<p>
    <a href="{% url 'fishing:place_fishing_select' fishing.id %}" class="btn">Изменить место</a>
    <a href="{% url 'fishing:place_fishing_remove' fishing.id fishing.placefishing_set.get.id %}" class="btn">Удалить место</a>
</p>
{% else %}
<p>Место не указано
    <a href="{% url 'fishing:place_fishing_select' fishing.id %}" class="btn">Указать место</a></p>
{% endif %}
<p><strong>Погода во время рыбалки:</strong></p>
{% if fishing.fishingweather_set.get %}
<form action="{% url 'fishing:fishing_weather_select' fishing.id fishing.fishingweather_set.get.id %}" method="GET">
    {% csrf_token %}
    <p><strong>Облачность: </strong>{{ fishing.fishingweather_set.get.weather.overcast }}</p>
    <p><strong>Осадки: </strong>{{ fishing.fishingweather_set.get.weather.weather_phenomena }}</p>
    <p><strong>Температруа воздуха: </strong>{{ fishing.fishingweather_set.get.weather.weather_temperature }}</p>
    <p><strong>Давление: </strong>{{ fishing.fishingweather_set.get.weather.pressure }}</p>
    <p><strong>Направление ветра: </strong>{{ fishing.fishingweather_set.get.weather.direction_wind }}</p>
    <p><strong>Скорость ветра: </strong>{{ fishing.fishingweather_set.get.weather.wind_speed }}</p>
    <p><strong>Лунный день: </strong>{{ fishing.fishingweather_set.get.weather.lunar_day }}</p>
    <button class="btn">Изменить погоду</button>
</form>
<form action="{% url 'fishing:fishing_weather_remove' fishing.id fishing.fishingweather_set.get.id %}" method="POST">
    {% csrf_token %}
    <button class="btn">Убрать погоду</button>
</form>
{% else %}
<form action="{% url 'fishing:fishing_weather_select' fishing.id 0 %}" method="GET">
    {% csrf_token %}
    <button class="btn">Указать погоду</button>
</form>
{% endif %}

<table>
    <tr>
        <th>Снасти:</th>
        <th>Монтажи:</th>
        <th>Кормушки:</th>
        <th>Поводки:</th>
        <th>Крючоки:</th>
        <th>Наживки:</th>
    </tr>
    {% for fishing_tackle in fishing.fishingtackle_set.all %}
    <tr>
        <td>
            <p><strong>Производитель: </strong>{{ fishing_tackle.tackle.tackle_manufacturer }}</p>
            <p><strong>Модель: </strong>{{ fishing_tackle.tackle.tackle_name }}</p>
            <p><strong>Длина: </strong>{{ fishing_tackle.tackle.tackle_length }}</p>
            <p><strong>Тест удилища: </strong>{{ fishing_tackle.tackle.tackle_casting_weight }}</p>
        </td>
        <td>
            <p>{{ fishing_tackle.fishingmontage_set.get.montage }}</p>
        </td>
        <td>
            {% if fishing_tackle.fishingtrough_set.get.trough.trough_manufacturer %}
            <p><strong>Производитель :</strong> {{ fishing_tackle.fishingtrough_set.get.trough.trough_manufacturer }}</p>
            {% endif %}
            {% if fishing_tackle.fishingtrough_set.get.trough.model_trough_name %}
            <p><strong>Модель :</strong>{{ fishing_tackle.fishingtrough_set.get.trough.model_trough_name }}</p>
            {% endif %}
            {% if fishing_tackle.fishingtrough_set.get.trough.model_trough_plastic %}
            <p><strong>Материал: </strong>Пластик</p>
            {% endif %}

            {% if fishing_tackle.fishingtrough_set.get.trough.model_trough_lugs %}
            <p><strong>Грунтозацепы: </strong>да</p>
            {% endif %}
            {% if fishing_tackle.fishingtrough_set.get.trough.feed_capacity %}
            <p><strong>Кормоёмкость: </strong>{{fishing_tackle.fishingtrough_set.get.trough.feed_capacity }}</p>
            {% endif %}
            {% if fishing_tackle.fishingtrough_set.get.trough.trough_weight %}
            <p><strong>Вес: </strong>{{ fishing_tackle.fishingtrough_set.get.trough.trough_weight }}</p>
            {% endif %}
        </td>
        <td>
            {% if fishing_tackle.fishingleash_set.get %}
            <p><strong>Поводочный материал: </strong>{{ fishing_tackle.fishingleash_set.get.leash.leash_material }}</p>
            <p><strong>Диаметр поводка: </strong>{{ fishing_tackle.fishingleash_set.get.leash.leash_diameter }}</p>
            <p><strong>Длина поводка: </strong>{{ fishing_tackle.fishingleash_set.get.leash.leash_length }}</p>
            {% endif %}
        </td>
        <td>
            {% if fishing_tackle.fishingcrochet_set.get %}
            <p><strong>Производитель: </strong> {{ fishing_tackle.fishingcrochet_set.get.crochet.crochet_manufacturer }}</p>
            <p><strong>Модель: </strong>{{ fishing_tackle.fishingcrochet_set.get.crochet.crochet_model }}</p>
            <p><strong>Размер: </strong>{{ fishing_tackle.fishingcrochet_set.get.crochet.crochet_size }}</p>
            {% endif %}
        </td>
        <td>
            {% if fishing_tackle.fishingnozzle_set.get %}
            {% if fishing_tackle.fishingnozzle_set.get.nozzle_base.bait %}
            <p><strong>Наживка: </strong>{{ fishing_tackle.fishingnozzle_set.get.nozzle_base.nozzle_name }}</p>
            {% else %}
            <p><strong>Производитель: </strong>{{ fishing_tackle.fishingnozzle_set.get.nozzle_base.nozzle_manufacturer }}</p>
            <p><strong>Насадка: </strong>{{ fishing_tackle.fishingnozzle_set.get.nozzle_base.nozzle_name }}</p>
            <p><strong>Диаметр насадки: </strong>{{ fishing_tackle.fishingnozzle_set.get.nozzle_base.nozzel_diameter }}</p>
            <p><strong>Тип насадки: </strong>{{ fishing_tackle.fishingnozzle_set.get.nozzle_base.nozzel_type }}</p>
            {% endif %}
            {% endif %}
        </td>
    </tr>
    <tr>
        <td>
            <a href="{% url 'fishing:fishing_tackle_select' fishing.id fishing_tackle.id %}" class="btn">Изменить снасть</a>
            <a href="{% url 'fishing:fishing_tackle_remove' fishing.id fishing_tackle.id %}" class="btn">Убрать снасть</a>
        </td>
        <td>
            {% if fishing_tackle.fishingmontage_set.get %}
            <a href="{% url 'fishing:fishing_montage_select' fishing.id fishing_tackle.id fishing_tackle.fishingmontage_set.get.id %}" class="btn">Изменить монтаж</a>
            <a href="{% url 'fishing:fishing_montage_remove' fishing.id fishing_tackle.fishingmontage_set.get.id %}" class="btn">Убрать монтаж</a>
            {% else %}
            <a href="{% url 'fishing:fishing_montage_select' fishing.id fishing_tackle.id 0 %}" class="btn">Указать монтаж</a>
            {% endif %}
        </td>
        <td>
            {% if fishing_tackle.fishingtrough_set.get %}
            <a href="{% url 'fishing:fishing_trough_select' fishing.id fishing_tackle.id fishing_tackle.fishingtrough_set.get.id %}" class="btn">Изменить кормушку</a>
            <a href="{% url 'fishing:fishing_trough_remove' fishing.id fishing_tackle.fishingtrough_set.get.id %}" class="btn">Убрать кормушку</a>
            {% else %}
            <a href="{% url 'fishing:fishing_trough_select' fishing.id fishing_tackle.id 0 %}" class="btn">Указать кормушку</a>
            {% endif %}
        </td>
        <td>
            {% if fishing_tackle.fishingleash_set.get %}
            <a href="{% url 'fishing:fishing_leash_select' fishing.id fishing_tackle.id fishing_tackle.fishingleash_set.get.id %}" class="btn">Изменить поводок</a>
            <a href="{% url 'fishing:fishing_leash_remove' fishing.id fishing_tackle.fishingleash_set.get.id %}" class="btn">Убрать поводок</a>
            {% else %}
            <a href="{% url 'fishing:fishing_leash_select' fishing.id fishing_tackle.id 0 %}" class="btn">Указать поводок</a>
            {% endif %}
        </td>
        <td>
            {% if fishing_tackle.fishingcrochet_set.get %}
            <a href="{% url 'fishing:fishing_crochet_select' fishing.id fishing_tackle.id fishing_tackle.fishingcrochet_set.get.id %}" class="btn">Изменить крючок</a>
            <a href="{% url 'fishing:fishing_crochet_remove' fishing.id fishing_tackle.fishingcrochet_set.get.id %}" class="btn">Убрать крючок</a>
            {% else %}
            <a href="{% url 'fishing:fishing_crochet_select' fishing.id fishing_tackle.id 0 %}" class="btn">Указать крючок</a>
            {% endif %}
        </td>
        <td>
            {% if fishing_tackle.fishingnozzle_set.get %}
            <a href="{% url 'fishing:fishing_nozzle_select' fishing.id fishing_tackle.id fishing_tackle.fishingnozzle_set.get.id %}" class="btn">Изменить наживку/насадку</a>
            <a href="{% url 'fishing:fishing_nozzle_remove' fishing.id fishing_tackle.fishingnozzle_set.get.id %}" class="btn">Убрать наживку/насадку</a>
            {% else %}
            <a href="{% url 'fishing:fishing_nozzle_select' fishing.id fishing_tackle.id 0 %}" class="btn">Указать наживку/насадку</a>
            {% endif %}
        </td>
    </tr>
    {% endfor %}


    <tr>
        <td><a href="{% url 'fishing:fishing_tackle_select' fishing.id 0 %}" class="btn">Добавить снасть</a></td>
        <td></td>
        <td></td>
        <td></td>
        <td>
            
        </td>
        <td>

        </td>
    </tr>

</table>

<p><strong>Прикормочная смесь: </strong>{{ fishing.fishinglure_set.get.lure_mix }}</p>
{% if fishing.fishinglure_set.get %}

<p><strong>Прикормы:</strong></p>
{% for lure in fishing.fishinglure_set.get.lure_mix.lure_set.all %}
<p><strong>Прикорм {{ forloop.counter }}</strong></p>
<p><strong>Производитель: </strong>{{ lure.lure_base.lure_manufacturer }}</p>
<p><strong>Название: </strong>{{ lure.lure_base.lure_name }}</p>
<p><strong>Доля прикорма: </strong>{{ lure.lure_weight }}</p>
<form action="{% url 'fishing:lure_in_lure_mix_remove' fishing.id fishing.fishinglure_set.get.lure_mix.id lure.id %}" method="POST">
    {% csrf_token %}
    <button class="btn">Удалить прикорм</button>
</form>
{% endfor %}
<form action="{% url 'fishing:lure_in_lure_mix' fishing.id fishing.fishinglure_set.get.lure_mix.id %}" method="GET">
    {% csrf_token %}
    <button class="btn">Добавить прикорм</button>
</form>
<p><strong>Аромы:</strong></p>
{% for aroma in fishing.fishinglure_set.get.lure_mix.aroma_set.all %}
<p><strong>Арома {{ forloop.counter }}</strong></p>
<p><strong>Производитель: </strong>{{ aroma.aroma_base.aroma_manufacturer }}</p>
<p><strong>Название: </strong>{{ aroma.aroma_base.aroma_name }}</p>
<p><strong>Объем аромы: </strong>{{ aroma.aroma_volume }} л.</p>
<form action="{% url 'fishing:aroma_in_lure_mix_remove' fishing.id fishing.fishinglure_set.get.lure_mix.id aroma.id %}" method="POST">
    {% csrf_token %}
    <button class="btn">Удалить арому</button>
</form>
{% endfor %}
<form action="{% url 'fishing:aroma_in_lure_mix' fishing.id fishing.fishinglure_set.get.lure_mix.id %}" method="GET">
    {% csrf_token %}
    <button class="btn">Добавить арому</button>
</form>

<p><strong>Добавки в состав:</strong></p>
{% for nozzle in fishing.fishinglure_set.get.lure_mix.nozzle_set.all %}
<p><strong>Наживка/насадка: {{ forloop.counter }}</strong></p>
<p><strong>Название: </strong>{{ nozzle.nozzle_base.nozzle_name }}</p>
<p><strong>Состояние: </strong>{{ nozzle.nozzle_state.state }}</p>
{% endfor %}

<form action="{% url 'fishing:nozzle_in_lure_mix' fishing.id fishing.fishinglure_set.get.lure_mix.id %}" method="GET">
    {% csrf_token %}
    <button class="btn">Добавить компонент</button>
</form>

<form action="{% url 'fishing:fishing_lure_select' fishing.id fishing.fishinglure_set.get.id %}" method="GET">
    {% csrf_token %}
    <button class="btn">Изменить прикормочную смесь</button>
</form>
<form action="{% url 'fishing:fishing_lure_remove' fishing.id fishing.fishinglure_set.get.id %}" method="POST">
    {% csrf_token %}
    <button class="btn">Убрать прикормочную смесь</button>
</form>
{% else %}
<form action="{% url 'fishing:fishing_lure_select' fishing.id 0 %}" method="GET">
    {% csrf_token %}
    <button class="btn">Указать прикормочную смесь</button>
</form>
{% endif %}

{% for fishing_pace in fishing.fishingpace_set.all %}
<p><strong>Темп: </strong>{{ fishing_pace.pace }}</p>
<form action="{% url 'fishing:fishing_pace_select' fishing.id fishing_pace.id %}" method="GET">
    {% csrf_token %}
    <button class="btn">Изменить темп</button>
</form>
<form action="{% url 'fishing:fishing_pace_remove' fishing.id fishing_pace.id %}" method="POST">
    {% csrf_token %}
    <button class="btn">Убрать темп</button>
</form>
{% endfor %}
<form action="{% url 'fishing:fishing_pace_select' fishing.id 0 %}" method="GET">
    {% csrf_token %}
    <button class="btn">Указать темп</button>
</form>


<p><strong>Улов:</strong></p>
{% for fishing_result in fishing.fishingresult_set.all %}
<p>
    {{ forloop.counter }}. {{ fishing_result.fish }}:
    {{ fishing_result.number_of_fish }} шт. общим весом:
    {{ fishing_result.fish_weight }} кг.
    <a href="{% url 'fishing:fishing_result_renewal' fishing.id fishing_result.id %}" class="btn">Редактировать</a>
    <a href="{% url 'fishing:fishing_result_remove' fishing.id fishing_result.id %}" class="btn">Удалить</a>
</p>
{% endfor %}
<a href="{% url 'fishing:fishing_result_add' fishing.id %}" class="btn">Добвить результат</a>

<p><strong>Трофеи:</strong></p>
{% for fish_trophy in fishing.fishtrophy_set.all %}
<p>
    {{ forloop.counter }}. {{ fish_trophy.fish }}: вес трофея
    {{fish_trophy.fish_trophy_weight}} кг.
    <a href="{% url 'fishing:fish_trophy_renewal' fishing.id fish_trophy.id %}" class="btn">Редактировать</a>
    <a href="{% url 'fishing:fish_trophy_remove' fishing.id fish_trophy.id %}" class="btn">Удалить</a>
</p>
{% endfor %}
<a href="{% url 'fishing:fish_trophy_add' fishing.id %}" class="btn">Добвить трофей</a>
<p><a onclick="back()" class="btn">Назад</a></p>
{% endif %}



{% if fishing_point != None %}
<!-- Толчка ловли -->
<p><strong>Азимут:</strong> {{ fishing_point.fishing_point_azimuth }}</p>
<p><strong>Дистанция:</strong> {{ fishing_point.fishing_point_distance }}</p>
<p><strong>Глубина:</strong> {{ fishing_point.fishing_poiny_depth }}</p>
<p><strong>Грунт:</strong> {{ fishing_point.priming }}</p>
<p>
    {% if fishing_point.owner == user %}
    <a href="{% url 'fishing:fishing_point_renewal' district_id water_id place_id fishing_point.id%}" class="btn">Редактировать</a>
    {% endif %}
    <a onclick="back()" class="btn">Назад</a>
</p>
{% endif %}


{% if fishing_lure != None %}
<!-- Прикормочная смесь -->
<p><strong>Наживка: </strong>{{ fishing_lure.nozzle }}</p>
<p><strong>Состояние наживки: </strong>{{ fishing_lure.nozzle_state }}</p>
<p><strong>Прикорм:</strong></p>
{% for lure in fishing_lure.lure_set.all %}
<p>
    {{lure.lure_base}}
    {{lure.lure_weight}}
    {% if fishing_lure.owner == user %}
    <a href="{% url 'fishing:lure_renewal' fishing_lure.id lure.id %}" class="btn">Редактировать</a>
    <a href="{% url 'fishing:lure_remove' fishing_lure.id lure.id %}" class="btn">Удалить</a>
    {% endif %}
</p>
{% endfor %}

<p><strong>Аромы:</strong></p>
{% for aroma in fishing_lure.aroma_set.all %}

<p>
    {{ aroma.aroma_base }}
    {{ aroma.aroma_volume }}
    {% if fishing_lure.owner == user %}
    <a href="{% url 'fishing:aroma_renewal' fishing_lure.id aroma.id %}" class="btn">Редактировать</a>
    <a href="{% url 'fishing:aroma_remove' fishing_lure.id aroma.id %}" class="btn">Удалить</a>
    {% endif %}
</p>
{% endfor %}
<p>
    <a href="{% url 'fishing:lure_add' fishing_lure.id %}" class="btn">Добавить прикорм</a>
    <a href="{% url 'fishing:aroma_add' fishing_lure.id %}" class="btn">Добавить арому</a>
    <a onclick="back()" class="btn">Назад</a>
</p>
{% endif %}



{% if nozzle != None %}
<!-- Наживки -->
<p><strong>Живой компонент: </strong>{{ nozzle.bait }}</p>
<p><strong>Производитель: </strong>{{ nozzle.nozzle_manufacturer }}</p>
<p><strong>Название: </strong>{{ nozzle.nozzle_name }}</p>
<p><strong>Диаметр: </strong>{{ nozzle.nozzle_diameter }}</p>
<p><strong>Тип: </strong>{{ nozzle.nozzle_type }}</p>
<p><a onclick="back()" class="btn">Назад</a></p>
{% endif %}



{% if place != None %}
<!-- Место -->
<p><strong>Ближайший населенный пункт:</strong> {{ place.place_locality }}</p>
<p><strong>N° (-90 до 90):</strong> {{ place.place_northern_degree }}</p>
<p><strong>N' (0 до 59):</strong> {{ place.place_northern_minute }}</p>
<p><strong>N" (0 до 59.999):</strong> {{ place.place_northern_second }}</p>
<p><strong>E° (-90 до 90):</strong> {{ place.place_easter_degree }}</p>
<p><strong>E' (0 до 59):</strong> {{ place.place_easter_minute }}</p>
<p><strong>E" (0 до 59.999):</strong> {{ place.place_easter_second }}</p>
<p>
    {% if place.owner == user %}
    <a href="{% url 'fishing:place_renewal' district_id water_id place.id %}" class="btn">Редактировать</a>
    {% endif %}
    <a href="{% url 'fishing:weather' district_id water_id place.id %}" class="btn">Погода</a>
    <a href="{% url 'fishing:fishing_point' district_id water_id place.id %}" class="btn">Точки ловли</a>
    <a href="{% url 'fishing:bottom_map' district_id water_id place.id %}" class="btn">Маркерная карта</a>
    <a onclick="back()" class="btn">Назад</a>
</p>
{% endif %}



{% if weather != None %}
<!-- Погода -->
<p><strong>Погода:</strong> {{ weather }}</p>
<p><strong>Облачность:</strong> {{ weather.overcast }}</p>
<p><strong>Явления:</strong> {{ weather.weather_phenomena }}</p>
<p><strong>Температура:</strong> {{ weather.weather_temperature }}</p>
<p><strong>Давление:</strong> {{ weather.pressure }}</p>
<p><strong>Направление ветра:</strong> {{ weather.direction_wind }}</p>
<p><strong>Скорость ветра:</strong> {{ weather.wind_speed }}</p>
<p><strong>Лунный день:</strong> {{ weather.lunar_day }}</p>
<p>
    <a href="{% url 'fishing:weather_renewal' district_id water_id place_id weather.id %}" class="btn">Редактировать</a>
    <a onclick="back()" class="btn">Назад</a>
</p>
{% endif %}
{% endblock %}